(function(){var d=30;var j=[];var a=0;var l=[];var m=225;if(!document.getElementById("happynewyear2014audio")){var k=document.createElement("audio");k.id="happynewyear2014audio";k.autoplay=true;var b=document.createElement("source");var o=document.createElement("source");var q=document.createElement("source");b.src="https://raw.github.com/jmpp/snowflakes/master/audio/Auld-Lang-Syne-8-Bit-cutted.mp3";o.src="https://raw.github.com/jmpp/snowflakes/master/audio/Auld-Lang-Syne-8-Bit-cutted.ogg";q.src="https://raw.github.com/jmpp/snowflakes/master/audio/Auld-Lang-Syne-8-Bit-cutted.wav";k.appendChild(b);k.appendChild(o);k.appendChild(q);document.body.appendChild(k)}for(var h=0;h<d;h++){var g=new Image();g.src="https://raw.github.com/jmpp/snowflakes/master/flocon.png";g.style.position="fixed";g.style.zIndex="9999";g.onload=(function(){l.push(this);if(++a===d){p()}}).bind(g)}function p(){var u,t,v;for(var r=0;r<l.length;r++){u=n(2,10);t="hsla(0,0%,45%,"+u/10+")";v="hsla(0,0%,55%,"+u/10+")";j.push({img:l[r],x:n(0,window.innerWidth),y:n(0,m),w:g.width,h:g.height,scale:n(0.2,0.6),alpha:1,direction:Math.PI/3,rotation:0,rotationSpeed:n(-1*u*0.2*0.008,u*0.2*0.008),speed:u*0.2});document.body.appendChild(l[r])}requestAnimFrame(e)}function f(){for(var r=0,u=j.length;r<u;r++){var t=j[r];t.alpha=(m-t.y)/m;t.rotation+=t.rotationSpeed;t.y+=Math.sin(t.direction)*t.speed;if(t.x+(t.w*t.scale)>window.innerWidth){t.x=-t.w*t.scale}if(t.y+(t.h*t.scale)>m){t.y=-t.h*t.scale}if(t.x+(t.w*t.scale)<0){t.x=window.innerWidth}if(t.y+(t.h*t.scale)<0){t.y=m}}}function c(){var u;for(var r=0,v=j.length;r<v;r++){var t=j[r];t.img.style.opacity=t.alpha;t.img.style.webkitTransform="scale("+t.scale+","+t.scale+") rotate("+(t.rotation*180/Math.PI)+"deg)";t.img.style.mozTransform="scale("+t.scale+","+t.scale+") rotate("+(t.rotation*180/Math.PI)+"deg)";t.img.style.msTransform="scale("+t.scale+","+t.scale+") rotate("+(t.rotation*180/Math.PI)+"deg)";t.img.style.transform="scale("+t.scale+","+t.scale+") rotate("+(t.rotation*180/Math.PI)+"deg)";t.img.style.left=t.x+"px";t.img.style.top=t.y+"px"}}function e(i){f();c();requestAnimFrame(e)}function n(r,i){return(Math.random()*(i-r))+r}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(i){window.setTimeout(i,1000/60)}})()})();